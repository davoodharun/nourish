{% extends 'base.html' %}
{% block body %}
ng-app="nourish"

{% endblock %}
{% block content %}
<div ui-view></div>
<script type="text/ng-template" id="profile">
  <form ng-submit='createStore()'>
    <h4>Add a store</h4>
    <div class="form-group">
      Store Name: <input class="form-control" ng-model='storeName'>
    </div>
    <div class="form-group">
      Description: <input class="form-control" ng-model='storeDescription'>
    </div>
    <button class="btn btn-primary" type="submit">SUBMIT</button>
  </form>
  <br>
  <div ng-init='getStores()'>
    <table class="table table-hover">
      <tr ng-repeat='store in stores'> 
        <td>
          <a ui-sref="storeDetail({storeId: store.id})">[[store.name]]</a>
        </td>
        <td>
          [[store.description]]
        </td>
        <td>
          <a href='/' ng-click="deleteStore(store.id)">Delete</a>
        </td>
      </tr>
    </table>
    
  </div>
</script>
<script type="text/ng-template" id="storeDetail">
   <div ng-init='getItemsFromStore()'>
   <h3>Store: [[storeName]]</h3>
   <h4>Description: [[storeDescription]]</h4>

   <form ng-submit='addItem()'>
    <div class="form-group">
      <label> Item Name: </label> <input class="form-control" ng-model='itemName'>
    </div>
    <div class="form-group"> 
      <label> Comments: </label> <input class="form-control" ng-model='itemComments'>
    </div>
    <div class="form-group"> 
      <label> Expiration Date: </label> <input class="form-control" ng-model='itemExpiration'> (YYYY-MM-DD)
    </div>
     <button class="btn btn-primary" type="submit">SUBMIT</button>
   </form>
   <br>
     <table class="table table-hover">
      <tr ng-repeat='item in storeItems'>
        <td>
          [[item.name]]
        </td>
        <td>
          [[item.comments]]
        </td>
        <td>
          [[item.expired]]
        </td>
        <td>
          [[item.expiration]]
        </td>
        <td>
          <a href='' ng-click="deleteItem(item.id)">Delete</a>
        </td>
      </tr> 
       
     </table>
   </div>
</script>
{% endblock %}

{% block javascript %}
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.18/angular-ui-router.min.js"></script>
<script src="{{ STATIC_URL}}js/app.js"></script>
<script src="{{ STATIC_URL}}js/controllers.js"></script>
<script src="{{ STATIC_URL}}js/services.js"></script>
{% endblock %}